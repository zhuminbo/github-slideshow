<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>diagrams.net</title>
<meta http-equiv="refresh" content="0;URL='https://app.diagrams.net/?libs=general#Hzhuminbo%2Fgithub-slideshow%2Fmaster%2Fscript%2Fmapreduce%20.drawio.html'"/>
<meta charset="utf-8"/>
</head>
<body>
<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="{&quot;highlight&quot;:&quot;#0000ff&quot;,&quot;nav&quot;:true,&quot;resize&quot;:true,&quot;xml&quot;:&quot;&lt;mxfile host=\&quot;app.diagrams.net\&quot; modified=\&quot;2022-09-22T09:53:54.743Z\&quot; agent=\&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36 HBPC/12.0.0.300\&quot; etag=\&quot;O9cnX-gx5YTMJF6HKKGU\&quot; version=\&quot;20.3.3\&quot; type=\&quot;github\&quot;&gt;&lt;diagram id=\&quot;yPxyJZ8AM_hMuL3Unpa9\&quot; name=\&quot;complex gitflow\&quot;&gt;&lt;mxGraphModel dx=\&quot;3260\&quot; dy=\&quot;1207\&quot; grid=\&quot;1\&quot; gridSize=\&quot;44\&quot; guides=\&quot;1\&quot; tooltips=\&quot;1\&quot; connect=\&quot;1\&quot; arrows=\&quot;1\&quot; fold=\&quot;1\&quot; page=\&quot;1\&quot; pageScale=\&quot;1\&quot; pageWidth=\&quot;12000\&quot; pageHeight=\&quot;16000\&quot; math=\&quot;0\&quot; shadow=\&quot;0\&quot;&gt;&lt;root&gt;&lt;mxCell id=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;1\&quot; parent=\&quot;0\&quot;/&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-1\&quot; value=\&quot;mapreduce\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=30;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;515\&quot; width=\&quot;170\&quot; height=\&quot;50\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-2\&quot; value=\&quot;1.\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=30;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;120\&quot; y=\&quot;50\&quot; width=\&quot;60\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-3\&quot; value=\&quot;单机处理大数据的问题\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;180\&quot; y=\&quot;50\&quot; width=\&quot;210\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-10\&quot; value=\&quot;2.\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=30;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;120\&quot; y=\&quot;110\&quot; width=\&quot;60\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-13\&quot; value=\&quot;已经有那么多文件系统了，为什么还需要hdfs？\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;labelBackgroundColor=none;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;172.5\&quot; y=\&quot;110\&quot; width=\&quot;420\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-14\&quot; value=\&quot;因为hdfs支持偏移量，能支持分布式计算\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;130\&quot; y=\&quot;166\&quot; width=\&quot;360\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-21\&quot; style=\&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.027;entryY=0.501;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=19;curved=1;\&quot; edge=\&quot;1\&quot; parent=\&quot;1\&quot; source=\&quot;icVVEVpQdX9dbwhuplYN-17\&quot; target=\&quot;icVVEVpQdX9dbwhuplYN-20\&quot;&gt;&lt;mxGeometry relative=\&quot;1\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-17\&quot; value=\&quot;存储模型&amp;lt;br&amp;gt;\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;783\&quot; y=\&quot;543.5\&quot; width=\&quot;125\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-20\&quot; value=\&quot;3.&amp;amp;nbsp; hdfs理论\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=30;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;172.5\&quot; y=\&quot;2112\&quot; width=\&quot;176\&quot; height=\&quot;88\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-22\&quot; value=\&quot;文件按字节线性切割成块，offset（字节偏移量），id\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1007\&quot; y=\&quot;256\&quot; width=\&quot;484\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-25\&quot; value=\&quot;文件与文件的&amp;lt;font style=&amp;quot;font-size: 19px;&amp;quot;&amp;gt;block可以不一样&amp;lt;/font&amp;gt;\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1025\&quot; y=\&quot;300\&quot; width=\&quot;270\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-26\&quot; value=\&quot;一个文件除最后一个block，其他大小都一样\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;360\&quot; width=\&quot;390\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-29\&quot; value=\&quot;block大小根据硬件io调整\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;420\&quot; width=\&quot;240\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-30\&quot; value=\&quot;block被分散在集群的节点中，具有location\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;480\&quot; width=\&quot;390\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-35\&quot; value=\&quot;block具有副本，副本没有主从概念，&amp;lt;br&amp;gt;不能出现在一个节点中\&quot; style=\&quot;text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1034\&quot; y=\&quot;553\&quot; width=\&quot;330\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-43\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;shadow=0;size=0.5;perimeterSpacing=5;strokeWidth=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;908\&quot; y=\&quot;267\&quot; width=\&quot;99\&quot; height=\&quot;613\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-46\&quot; value=\&quot;副本是满足可靠性和性能的关键\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1028\&quot; y=\&quot;637\&quot; width=\&quot;284\&quot; height=\&quot;34\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-53\&quot; value=\&quot;文件上传可以指定大小，副本数，上传后只能修改副本数\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1025\&quot; y=\&quot;699\&quot; width=\&quot;493\&quot; height=\&quot;34\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-54\&quot; value=\&quot;一次写入多次读取，不能修改\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;795\&quot; width=\&quot;265\&quot; height=\&quot;34\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-55\&quot; value=\&quot;支持追加数据\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1028\&quot; y=\&quot;748\&quot; width=\&quot;132\&quot; height=\&quot;34\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-198\&quot; value=\&quot;不能操纵块，只能增删改文件\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1028\&quot; y=\&quot;836\&quot; width=\&quot;264\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-199\&quot; value=\&quot;hadoop计算向数据移动\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;120\&quot; y=\&quot;267\&quot; width=\&quot;220\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-200\&quot; value=\&quot;架构\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;783\&quot; y=\&quot;1140\&quot; width=\&quot;125\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-201\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;shadow=0;size=0.5;perimeterSpacing=5;strokeWidth=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;908\&quot; y=\&quot;1064\&quot; width=\&quot;99\&quot; height=\&quot;212\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-202\&quot; value=\&quot;hdfs是一个主从架构，由1个namenode和多个datanode组成，&amp;lt;br&amp;gt;nn负责存储和管理文件的元数据，并维护一个层次型的目录树\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1034\&quot; y=\&quot;1042\&quot; width=\&quot;528\&quot; height=\&quot;88\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-203\&quot; value=\&quot;dn负责存储datanode，并提供读写\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1028\&quot; y=\&quot;1130\&quot; width=\&quot;308\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-204\&quot; value=\&quot;dn和nn维持心跳，并汇报持有的block信息\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1017\&quot; y=\&quot;1174\&quot; width=\&quot;396\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-205\&quot; value=\&quot;客户端client&amp;amp;nbsp;与nn交互文件元数据metadata，与dn交互文件block数据\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1017\&quot; y=\&quot;1232\&quot; width=\&quot;616\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-206\&quot; value=\&quot;角色即进程，通用来说一个角色就是一个jvm进程\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1029\&quot; y=\&quot;1352\&quot; width=\&quot;440\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-207\&quot; value=\&quot;namenode ：完全基于内存存储元数据，目录结构、文件block映射&amp;lt;br&amp;gt;\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1034\&quot; y=\&quot;1408\&quot; width=\&quot;572\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-208\&quot; value=\&quot;提供副本放置策略\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1136\&quot; y=\&quot;1452\&quot; width=\&quot;176\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-209\&quot; value=\&quot;datanode：基于本地磁盘存储block，并保存block校验和保证数据可靠性&amp;lt;br&amp;gt;与namenode保持心跳，汇报block列表状态\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1034\&quot; y=\&quot;1506\&quot; width=\&quot;616\&quot; height=\&quot;88\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-210\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;shadow=0;size=0.5;perimeterSpacing=5;strokeWidth=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;918\&quot; y=\&quot;1352\&quot; width=\&quot;99\&quot; height=\&quot;212\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-211\&quot; value=\&quot;角色\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;783\&quot; y=\&quot;1428\&quot; width=\&quot;125\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-212\&quot; value=\&quot;元数据持久化\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;793\&quot; y=\&quot;1890\&quot; width=\&quot;125\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-213\&quot; value=\&quot;任何对元数据的修改操作，nn都会使用editl.log的日志记录下来&amp;lt;br&amp;gt;\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1017\&quot; y=\&quot;1672\&quot; width=\&quot;572\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-214\&quot; value=\&quot;用最近时点的fsimage（快照）+增量的editslog(日志）的方式持久化\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1007\&quot; y=\&quot;1876\&quot; width=\&quot;616\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-215\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;shadow=0;size=0.5;perimeterSpacing=5;strokeWidth=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;921\&quot; y=\&quot;1684\&quot; width=\&quot;99\&quot; height=\&quot;472\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-216\&quot; value=\&quot;日志的特点：&amp;amp;nbsp;记录实时发生的增删改操作，完整性比较好，&amp;lt;br&amp;gt;但是加载缓慢，占用空间大\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1017\&quot; y=\&quot;1716\&quot; width=\&quot;528\&quot; height=\&quot;88\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-217\&quot; value=\&quot;快照特点：&amp;amp;nbsp;间隔时间，内存全量数据基于某一时间点向磁盘进行序列化溢写，&amp;lt;br&amp;gt;，加载速度快，但是间隔时间的，容易丢失数据\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1025\&quot; y=\&quot;1788\&quot; width=\&quot;660\&quot; height=\&quot;88\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-220\&quot; value=\&quot;元数据：文件属性（文件有多少副本，有多少个块，path：/**/**/**），文件的每个块存在哪个dn上\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;1958\&quot; width=\&quot;836\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-221\&quot; value=\&quot;在持久化的时候，文件的属性会持久化，&amp;lt;br&amp;gt;但block块在哪个dn上不会持久化&amp;lt;br&amp;gt;分布式时代，数据一致性很重要&amp;lt;br&amp;gt;等dn心跳\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;fontColor=#FF3399;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;2024\&quot; width=\&quot;352\&quot; height=\&quot;132\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-223\&quot; value=\&quot;block副本放置策略\&quot; style=\&quot;rounded=0;whiteSpace=wrap;html=1;fontSize=19;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;780\&quot; y=\&quot;2324\&quot; width=\&quot;125\&quot; height=\&quot;60\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-224\&quot; value=\&quot;第一个副本放置在提交的dn上，&amp;lt;br&amp;gt;如果是集群提交的，随机选一台磁盘&amp;lt;br&amp;gt;不太慢，cpu不太忙的\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;fontColor=#1A1A1A;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1012\&quot; y=\&quot;2244\&quot; width=\&quot;352\&quot; height=\&quot;88\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-225\&quot; value=\&quot;第二个副本，出机架，因为有可能只有2个副本\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;fontColor=#1A1A1A;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1004\&quot; y=\&quot;2348\&quot; width=\&quot;440\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-226\&quot; value=\&quot;第三个副本和第二个副本同机架，io成本，跨交换机流式成本\&quot; style=\&quot;text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=19;fontColor=#1A1A1A;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;1020\&quot; y=\&quot;2420\&quot; width=\&quot;528\&quot; height=\&quot;44\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=\&quot;icVVEVpQdX9dbwhuplYN-228\&quot; value=\&quot;\&quot; style=\&quot;shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;shadow=0;size=0.5;perimeterSpacing=5;strokeWidth=1;\&quot; vertex=\&quot;1\&quot; parent=\&quot;1\&quot;&gt;&lt;mxGeometry x=\&quot;905\&quot; y=\&quot;2244\&quot; width=\&quot;99\&quot; height=\&quot;220\&quot; as=\&quot;geometry\&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;&quot;,&quot;toolbar&quot;:&quot;pages zoom layers lightbox&quot;,&quot;page&quot;:0}"></div>
<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="https://app.diagrams.net/?libs=general#Hzhuminbo%2Fgithub-slideshow%2Fmaster%2Fscript%2Fmapreduce%20.drawio.html" target="_blank"><img border="0" src="https://app.diagrams.net/images/drawlogo128.png"/></a>
</body>
</html>
